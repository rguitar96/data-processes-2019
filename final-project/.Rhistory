library(treemapify)
library(reshape2)
library(plyr)
usa_deaths_states = read.csv("data/death-causes-usa.csv", sep=";")
spain_deaths = read.csv("data/death-causes-spain-2017-modified.csv", sep=";",fileEncoding="UTF-8-BOM")
dim(usa_deaths_states)
head(usa_deaths_states)
dim(spain_deaths)
head(spain_deaths)
usa_deaths = usa_deaths_states %>% filter(State == "United States") %>% filter(Cause.Name != "All causes")
head(usa_deaths)
spain_deaths %>% filter(GENDER == "Both") %>% filter(AGE=="All ages") %>% View()
ggplot(usa_deaths, aes(x=Year, y=Age.adjusted.Death.Rate, fill=Cause.Name)) +
labs(title = "Trend of death causes", x = "", y = "Death Rate / 100.000 (Age Adjusted)", fill = "Causes") +
scale_color_brewer(palette = "Paired") +
theme(plot.title = element_text(hjust = 0.5)) +
theme_minimal() +
geom_area()
ggplot(usa_deaths, aes(x=Year, y=log(Deaths), color=Cause.Name)) +
labs(title = "Changes on death causes over the years", x = "", y = "log(Death Rate)", fill = "Causes") +
scale_color_brewer(palette = "Paired") +
theme(plot.title = element_text(hjust = 0.5)) +
theme_minimal() +
geom_line()
data <- spain_deaths %>% filter(GENDER == "Both") %>% filter(AGE=="All ages") %>% filter(DISEASE!="All causes") %>% filter(DISEASE!="Other causes") %>% top_n(10, NUMBER.OF.DEATHS)
ggplot(data, aes(area=NUMBER.OF.DEATHS, fill=DISEASE)) +
scale_fill_brewer(palette = "Paired") +
labs(title = "Most deadly diseases in Spain (2017)", fill = "Causes") +
geom_treemap()
data2 <- spain_deaths
data2$AGE <- factor(data2$AGE, c("0 to 1", "1 to 4", "5 to 9", "10 to 14", "15 to 19", "20 to 24", "25 to 29", "30 to 34", "35 to 39", "40 to 44", "45 to 49", "50 to 54", "55 to 59", "60 to 64", "65 to 69", "70 to 74", "75 to 79", "80 to 84", "85 to 89", "90 to 94", "95 or more", "All ages"))
data2 <- data2 %>% filter(DISEASE == "Diseases of the circulatory system") %>% filter(GENDER != "Both") %>% filter(AGE != "All ages")
data2 <- data2 %>% mutate(NUMBER.OF.DEATHS = ifelse(GENDER == "Males", -1 * NUMBER.OF.DEATHS, NUMBER.OF.DEATHS))
ggplot(data2, aes(x = AGE, y = NUMBER.OF.DEATHS, fill = GENDER)) +
geom_bar(subset = .(GENDER == "Females"), stat = "identity") +
geom_bar(subset = .(GENDER == "Males"), stat = "identity") +
#scale_y_continuous(breaks = seq(-15000, 15000, 5000),
#                   labels = paste0(as.character(c(seq(15, 0, -5), seq(5, 15, 5))), "m")) +
coord_flip() +
scale_fill_brewer(palette = "Set1") +
theme_bw()
ggplot(data2, aes(x = AGE, y = NUMBER.OF.DEATHS, fill = GENDER))+
geom_linerange(data = data2[data2$GENDER=="Males",],
aes(ymin = -0.3, ymax = -0.3+NUMBER.OF.DEATHS), size = 3.5, alpha = 0.8)+
geom_linerange(data = data2[data2$GENDER=="Females",],
aes(ymin = 0.3, ymax = 0.3+NUMBER.OF.DEATHS), size = 3.5, alpha = 0.8)+
geom_label(aes(x = AGE, y = 0, label = AGE),
inherit.aes = F,
size = 3.5, label.padding = unit(0.0, "lines"), label.size = 0,
label.r = unit(0.0, "lines"), fill = "#EFF2F4", alpha = 0.9, color = "#5D646F")+
scale_y_continuous(breaks = c(c(-2, -1.5, -1, -0.5, 0) + -0.3, c(0, 0.5, 1, 1.5, 2)+0.3),
labels = c("2", "1.5", "1", "0.5", "0", "0", "0.5", "1", "1.5", "2")) +
coord_flip() +
labs(title = "Title",
subtitle = "Subtitle")+
scale_color_manual(name = "", values = c(male = "#3E606F", female = "#8C3F4D"),
labels = c("Label1", "Label2"))+
theme_minimal()+
theme(text = element_text(color = "#3A3F4A"),
panel.grid.major.y = element_blank(),
panel.grid.minor = element_blank(),
panel.grid.major.x = element_line(linetype = "dotted", size = 0.3, color = "#3A3F4A"),
axis.title = element_blank(),
axis.text.x = element_text(size = 12, color = "#5D646F"),
axis.text.y = element_blank(),
plot.background = element_rect(fill = "#EFF2F4"),
plot.margin = unit(c(2, 2, 2, 2), "cm"),
legend.position = "top",
legend.margin  = unit(0.1, "lines"),
legend.text.align = 0)
library(dplyr)
library(ggplot2)
library(patchwork)
library(treemapify)
library(reshape2)
library(plyr)
usa_deaths_states = read.csv("data/death-causes-usa.csv", sep=";")
spain_deaths = read.csv("data/death-causes-spain-2017-modified.csv", sep=";",fileEncoding="UTF-8-BOM")
dim(usa_deaths_states)
head(usa_deaths_states)
dim(spain_deaths)
head(spain_deaths)
usa_deaths = usa_deaths_states %>% filter(State == "United States") %>% filter(Cause.Name != "All causes")
head(usa_deaths)
spain_deaths %>% filter(GENDER == "Both") %>% filter(AGE=="All ages") %>% View()
ggplot(usa_deaths, aes(x=Year, y=Age.adjusted.Death.Rate, fill=Cause.Name)) +
labs(title = "Trend of death causes", x = "", y = "Death Rate / 100.000 (Age Adjusted)", fill = "Causes") +
scale_color_brewer(palette = "Paired") +
theme(plot.title = element_text(hjust = 0.5)) +
theme_minimal() +
geom_area()
ggplot(usa_deaths, aes(x=Year, y=log(Deaths), color=Cause.Name)) +
labs(title = "Changes on death causes over the years", x = "", y = "log(Death Rate)", fill = "Causes") +
scale_color_brewer(palette = "Paired") +
theme(plot.title = element_text(hjust = 0.5)) +
theme_minimal() +
geom_line()
data <- spain_deaths %>% filter(GENDER == "Both") %>% filter(AGE=="All ages") %>% filter(DISEASE!="All causes") %>% filter(DISEASE!="Other causes") %>% top_n(10, NUMBER.OF.DEATHS)
ggplot(data, aes(area=NUMBER.OF.DEATHS, fill=DISEASE)) +
scale_fill_brewer(palette = "Paired") +
labs(title = "Most deadly diseases in Spain (2017)", fill = "Causes") +
geom_treemap()
data2 <- spain_deaths
data2$AGE <- factor(data2$AGE, c("0 to 1", "1 to 4", "5 to 9", "10 to 14", "15 to 19", "20 to 24", "25 to 29", "30 to 34", "35 to 39", "40 to 44", "45 to 49", "50 to 54", "55 to 59", "60 to 64", "65 to 69", "70 to 74", "75 to 79", "80 to 84", "85 to 89", "90 to 94", "95 or more", "All ages"))
data2 <- data2 %>% filter(DISEASE == "Diseases of the circulatory system") %>% filter(GENDER != "Both") %>% filter(AGE != "All ages")
data2 <- data2 %>% mutate(NUMBER.OF.DEATHS = ifelse(GENDER == "Males", -1 * NUMBER.OF.DEATHS, NUMBER.OF.DEATHS))
ggplot(data2, aes(x = AGE, y = NUMBER.OF.DEATHS, fill = GENDER)) +
geom_bar(subset = .(GENDER == "Females"), stat = "identity") +
geom_bar(subset = .(GENDER == "Males"), stat = "identity") +
#scale_y_continuous(breaks = seq(-15000, 15000, 5000),
#                   labels = paste0(as.character(c(seq(15, 0, -5), seq(5, 15, 5))), "m")) +
coord_flip() +
scale_fill_brewer(palette = "Set1") +
theme_bw()
ggplot(data2, aes(x = AGE, y = NUMBER.OF.DEATHS, fill = GENDER))+
geom_linerange(data = data2[data2$GENDER=="Males",],
aes(ymin = -0.3, ymax = -0.3+NUMBER.OF.DEATHS), size = 3.5, alpha = 0.8)+
geom_linerange(data = data2[data2$GENDER=="Females",],
aes(ymin = 0.3, ymax = 0.3+NUMBER.OF.DEATHS), size = 3.5, alpha = 0.8)+
geom_label(aes(x = AGE, y = 0, label = AGE),
inherit.aes = F,
size = 3.5, label.padding = unit(0.0, "lines"), label.size = 0,
label.r = unit(0.0, "lines"), fill = "#EFF2F4", alpha = 0.9, color = "#5D646F")+
scale_y_continuous(breaks = c(c(-2, -1.5, -1, -0.5, 0) + -0.3, c(0, 0.5, 1, 1.5, 2)+0.3),
labels = c("2", "1.5", "1", "0.5", "0", "0", "0.5", "1", "1.5", "2")) +
coord_flip() +
labs(title = "Title",
subtitle = "Subtitle")+
scale_color_manual(name = "", values = c(male = "#3E606F", female = "#8C3F4D"),
labels = c("Label1", "Label2"))+
theme_minimal()+
theme(text = element_text(color = "#3A3F4A"),
panel.grid.major.y = element_blank(),
panel.grid.minor = element_blank(),
panel.grid.major.x = element_line(linetype = "dotted", size = 0.3, color = "#3A3F4A"),
axis.title = element_blank(),
axis.text.x = element_text(size = 12, color = "#5D646F"),
axis.text.y = element_blank(),
plot.background = element_rect(fill = "#EFF2F4"),
plot.margin = unit(c(2, 2, 2, 2), "cm"),
legend.position = "top",
legend.text.align = 0)
library(reshape2)
data2 <- spain_deaths
data2$AGE <- factor(data2$AGE, c("0 to 1", "1 to 4", "5 to 9", "10 to 14", "15 to 19", "20 to 24", "25 to 29", "30 to 34", "35 to 39", "40 to 44", "45 to 49", "50 to 54", "55 to 59", "60 to 64", "65 to 69", "70 to 74", "75 to 79", "80 to 84", "85 to 89", "90 to 94", "95 or more", "All ages"))
data2 <- data2 %>% filter(DISEASE == "Diseases of the circulatory system") %>% filter(GENDER != "Both") %>% filter(AGE != "All ages")
data2 <- data2 %>% mutate(NUMBER.OF.DEATHS = ifelse(GENDER == "Males", -1 * NUMBER.OF.DEATHS, NUMBER.OF.DEATHS))
ggplot(data2, aes(x = AGE, y = NUMBER.OF.DEATHS, fill = GENDER)) +
geom_bar(subset = .(GENDER == "Females"), stat = "identity") +
geom_bar(subset = .(GENDER == "Males"), stat = "identity") +
scale_y_continuous(breaks = seq(-15000, 15000, 5000),
labels = paste0(as.character(c(seq(15, 0, -5), seq(5, 15, 5))), "m")) +
coord_flip() +
scale_fill_brewer(palette = "Set1") +
theme_bw()
ggplot(data2, aes(x = AGE, y = NUMBER.OF.DEATHS, fill = GENDER)) +
geom_bar(subset = .(GENDER == "Females"), stat = "identity") +
geom_bar(subset = .(GENDER == "Males"), stat = "identity") +
scale_y_continuous(breaks = seq(-18000, 18000, 6000),
labels = paste0(as.character(c(seq(18, 0, -3), seq(3, 18, 5))), "m")) +
coord_flip() +
scale_fill_brewer(palette = "Set1") +
theme_bw()
ggplot(data2, aes(x = AGE, y = NUMBER.OF.DEATHS, fill = GENDER)) +
geom_bar(subset = .(GENDER == "Females"), stat = "identity") +
geom_bar(subset = .(GENDER == "Males"), stat = "identity") +
scale_y_continuous(breaks = seq(-18000, 18000, 6000),
labels = paste0(as.character(c(seq(18, 0, -3), seq(3, 18, 3))), "m")) +
coord_flip() +
scale_fill_brewer(palette = "Set1") +
theme_bw()
ggplot(data2, aes(x = AGE, y = NUMBER.OF.DEATHS, fill = GENDER)) +
geom_bar(subset = .(GENDER == "Females"), stat = "identity") +
geom_bar(subset = .(GENDER == "Males"), stat = "identity") +
scale_y_continuous(breaks = seq(-18000, 18000, 6000),
labels = paste0(as.character(c(seq(18, 0, -3), seq(6, 18, 3))), "m")) +
coord_flip() +
scale_fill_brewer(palette = "Set1") +
theme_bw()
seq(18,0,-3)
seq(6,18,3)
seq(3,18,3)
ggplot(data2, aes(x = AGE, y = NUMBER.OF.DEATHS, fill = GENDER)) +
geom_bar(subset = .(GENDER == "Females"), stat = "identity") +
geom_bar(subset = .(GENDER == "Males"), stat = "identity") +
scale_y_continuous(breaks = seq(-18000, 18000, 6000),
labels = paste0(as.character(c(seq(18, 0, -3), seq(3, 18, 3))), "m")) +
coord_flip() +
scale_fill_brewer(palette = "Set1") +
theme_bw()
seq(-18000, 18000, 6000)
as.character(c(seq(18, 0, -3), seq(3, 18, 3))), "m")
(as.character(c(seq(18, 0, -3), seq(3, 18, 3))), "m"))
paste0(as.character(c(seq(18, 0, -3), seq(3, 18, 3))), "m"))
paste0(as.character(c(seq(18, 0, -3), seq(3, 18, 3))), "m")
seq(-18000, 18000, 6000)
seq(-18000, 18000, 3000)
ggplot(data2, aes(x = AGE, y = NUMBER.OF.DEATHS, fill = GENDER)) +
geom_bar(subset = .(GENDER == "Females"), stat = "identity") +
geom_bar(subset = .(GENDER == "Males"), stat = "identity") +
scale_y_continuous(breaks = seq(-18000, 18000, 3000),
labels = paste0(as.character(c(seq(18, 0, -3), seq(3, 18, 3))), "m")) +
coord_flip() +
scale_fill_brewer(palette = "Set1") +
theme_bw()
seq(-20000, 20000, 5000)
(as.character(c(seq(18, 0, -3), seq(3, 18, 3))), "m")
as.character(c(seq(18, 0, -3), seq(3, 18, 3)))
ggplot(data2, aes(x = AGE, y = NUMBER.OF.DEATHS, fill = GENDER)) +
geom_bar(subset = .(GENDER == "Females"), stat = "identity") +
geom_bar(subset = .(GENDER == "Males"), stat = "identity") +
scale_y_continuous(breaks = seq(-20000, 20000, 5000),
labels = paste0(as.character(c(seq(20, 0, -5), seq(5, 20, 5))), "m")) +
coord_flip() +
scale_fill_brewer(palette = "Set1") +
theme_bw()
ggplot(data2, aes(x = AGE, y = NUMBER.OF.DEATHS, fill = GENDER)) +
geom_bar(subset = .(GENDER == "Females"), stat = "identity") +
geom_bar(subset = .(GENDER == "Males"), stat = "identity") +
scale_y_continuous(breaks = seq(-25000, 20000, 5000),
labels = paste0(as.character(c(seq(25, 0, -5), seq(5, 25, 5))), "m")) +
coord_flip() +
scale_fill_brewer(palette = "Set1") +
theme_bw()
seq(-25000, 20000, 5000)
c(seq(25, 0, -5), seq(5, 25, 5)
)
ggplot(data2, aes(x = AGE, y = NUMBER.OF.DEATHS, fill = GENDER)) +
geom_bar(subset = .(GENDER == "Females"), stat = "identity") +
geom_bar(subset = .(GENDER == "Males"), stat = "identity") +
scale_y_continuous(breaks = seq(-25000, 20000, 5000),
labels = paste0(as.character(c(seq(25, 0, -5), seq(5, 20, 5))), "m")) +
coord_flip() +
scale_fill_brewer(palette = "Set1") +
theme_bw()
install.packages("plotrix")
install.packages("plotrix")
install.packages("plotrix")
install.packages("plotrix")
library(plotrix)
install.packages("plotrix")
install.packages("plorix")
install.packages("plorix")
install.packages("plotrix")
library(plotrix)
par(mar=pyramid.plot((data2 %>% filter(GENDER == "Males"))$NUMBER.OF.DEATHS,
(data2 %>% filter(GENDER == "Females"))$NUMBER.OF.DEATHS,
labels=data2$AGE,
main="Australian population pyramid 2002",lxcol=mcol,rxcol=fcol,
gap=0.5,show.values=TRUE))
par(mar=pyramid.plot((filter(data2, GENDER == "Males"))$NUMBER.OF.DEATHS,
(filter(data2, GENDER == "Females"))$NUMBER.OF.DEATHS,
labels=data2$AGE,
main="Australian population pyramid 2002",lxcol=mcol,rxcol=fcol,
gap=0.5,show.values=TRUE))
par(mar=pyramid.plot((filter(data2,data2$GENDER == "Males"))$NUMBER.OF.DEATHS,
(filter(data2, GENDER == "Females"))$NUMBER.OF.DEATHS,
labels=data2$AGE,
main="Australian population pyramid 2002",lxcol=mcol,rxcol=fcol,
gap=0.5,show.values=TRUE))
par(mar=pyramid.plot((filter(data2, GENDER == "Males"))$NUMBER.OF.DEATHS,
(filter(data2, GENDER == "Females"))$NUMBER.OF.DEATHS,
labels=data2$AGE,
main="Australian population pyramid 2002",lxcol=mcol,rxcol=fcol,
gap=0.5,show.values=TRUE))
par(mar=pyramid.plot((filter(data2$GENDER == "Males"))$NUMBER.OF.DEATHS,
(filter(data2, GENDER == "Females"))$NUMBER.OF.DEATHS,
labels=data2$AGE,
main="Australian population pyramid 2002",lxcol=mcol,rxcol=fcol,
gap=0.5,show.values=TRUE))
data2 <- spain_deaths
data2$AGE <- factor(data2$AGE, c("0 to 1", "1 to 4", "5 to 9", "10 to 14", "15 to 19", "20 to 24", "25 to 29", "30 to 34", "35 to 39", "40 to 44", "45 to 49", "50 to 54", "55 to 59", "60 to 64", "65 to 69", "70 to 74", "75 to 79", "80 to 84", "85 to 89", "90 to 94", "95 or more", "All ages"))
data2 <- data2 %>% filter(DISEASE == "Diseases of the circulatory system") %>% filter(GENDER != "Both") %>% filter(AGE != "All ages")
par(mar=pyramid.plot((filter(data2, GENDER == "Males"))$NUMBER.OF.DEATHS,
(filter(data2, GENDER == "Females"))$NUMBER.OF.DEATHS,
labels=data2$AGE,
main="Australian population pyramid 2002",lxcol=mcol,rxcol=fcol,
gap=0.5,show.values=TRUE))
library(dplyr)
library(ggplot2)
library(patchwork)
library(treemapify)
library(reshape2)
library(plyr)
library(plotrix)
usa_deaths_states = read.csv("data/death-causes-usa.csv", sep=";")
spain_deaths = read.csv("data/death-causes-spain-2017-modified.csv", sep=";",fileEncoding="UTF-8-BOM")
dim(usa_deaths_states)
head(usa_deaths_states)
dim(spain_deaths)
head(spain_deaths)
usa_deaths = usa_deaths_states %>% filter(State == "United States") %>% filter(Cause.Name != "All causes")
head(usa_deaths)
spain_deaths %>% filter(GENDER == "Both") %>% filter(AGE=="All ages") %>% View()
ggplot(usa_deaths, aes(x=Year, y=Age.adjusted.Death.Rate, fill=Cause.Name)) +
labs(title = "Trend of death causes", x = "", y = "Death Rate / 100.000 (Age Adjusted)", fill = "Causes") +
scale_color_brewer(palette = "Paired") +
theme(plot.title = element_text(hjust = 0.5)) +
theme_minimal() +
geom_area()
ggplot(usa_deaths, aes(x=Year, y=log(Deaths), color=Cause.Name)) +
labs(title = "Changes on death causes over the years", x = "", y = "log(Death Rate)", fill = "Causes") +
scale_color_brewer(palette = "Paired") +
theme(plot.title = element_text(hjust = 0.5)) +
theme_minimal() +
geom_line()
data <- spain_deaths %>% filter(GENDER == "Both") %>% filter(AGE=="All ages") %>% filter(DISEASE!="All causes") %>% filter(DISEASE!="Other causes") %>% top_n(10, NUMBER.OF.DEATHS)
ggplot(data, aes(area=NUMBER.OF.DEATHS, fill=DISEASE)) +
scale_fill_brewer(palette = "Paired") +
labs(title = "Most deadly diseases in Spain (2017)", fill = "Causes") +
geom_treemap()
data2 <- spain_deaths
data2$AGE <- factor(data2$AGE, c("0 to 1", "1 to 4", "5 to 9", "10 to 14", "15 to 19", "20 to 24", "25 to 29", "30 to 34", "35 to 39", "40 to 44", "45 to 49", "50 to 54", "55 to 59", "60 to 64", "65 to 69", "70 to 74", "75 to 79", "80 to 84", "85 to 89", "90 to 94", "95 or more", "All ages"))
data2 <- data2 %>% filter(DISEASE == "Diseases of the circulatory system") %>% filter(GENDER != "Both") %>% filter(AGE != "All ages")
#data2 <- data2 %>% mutate(NUMBER.OF.DEATHS = ifelse(GENDER == "Males", -1 * NUMBER.OF.DEATHS, NUMBER.OF.DEATHS))
ggplot(data2, aes(x = AGE, y = NUMBER.OF.DEATHS, fill = GENDER)) +
geom_bar(subset = .(GENDER == "Females"), stat = "identity") +
geom_bar(subset = .(GENDER == "Males"), stat = "identity") +
scale_y_continuous(breaks = seq(-25000, 20000, 5000),
labels = paste0(as.character(c(seq(25, 0, -5), seq(5, 20, 5))), "m")) +
coord_flip() +
scale_fill_brewer(palette = "Set1") +
theme_bw()
par(mar=pyramid.plot((filter(data2, GENDER == "Males"))$NUMBER.OF.DEATHS,
(filter(data2, GENDER == "Females"))$NUMBER.OF.DEATHS,
labels=data2$AGE,
main="Australian population pyramid 2002",lxcol=mcol,rxcol=fcol,
gap=0.5,show.values=TRUE))
par(mar=pyramid.plot((filter(data2, GENDER == "Males"))$NUMBER.OF.DEATHS,
(filter(data2, GENDER == "Females"))$NUMBER.OF.DEATHS,
labels=data2$AGE,
main="Australian population pyramid 2002",
gap=0.5,show.values=TRUE))
data2$AGE
mcol<-color.gradient(c(0,0,0.5,1),c(0,0,0.5,1),c(1,1,0.5,1),22)
fcol<-color.gradient(c(1,1,0.5,1),c(0.5,0.5,0.5,1),c(0.5,0.5,0.5,1),22)
par(mar=pyramid.plot((filter(data2, GENDER == "Males"))$NUMBER.OF.DEATHS,
(filter(data2, GENDER == "Females"))$NUMBER.OF.DEATHS,
labels=data2$AGE,
main="Australian population pyramid 2002",lxcol=mcol,rxcol=fcol,
gap=0.5,show.values=TRUE))
filter(data2, GENDER == "Males"))$NUMBER.OF.DEATHS
filter(data2, GENDER == "Males")$NUMBER.OF.DEATHS
data2
filter(data2, GENDER == "Males")
mcol<-color.gradient(c(0,0,0.5,1),c(0,0,0.5,1),c(1,1,0.5,1),21)
fcol<-color.gradient(c(1,1,0.5,1),c(0.5,0.5,0.5,1),c(0.5,0.5,0.5,1),21)
par(mar=pyramid.plot((filter(data2, GENDER == "Males"))$NUMBER.OF.DEATHS,
(filter(data2, GENDER == "Females"))$NUMBER.OF.DEATHS,
labels=data2$AGE,
main="Australian population pyramid 2002",lxcol=mcol,rxcol=fcol,
gap=0.5,show.values=TRUE))
data2$AGE
data2 <- spain_deaths
data2$AGE <- factor(data2$AGE, c("0 to 1", "1 to 4", "5 to 9", "10 to 14", "15 to 19", "20 to 24", "25 to 29", "30 to 34", "35 to 39", "40 to 44", "45 to 49", "50 to 54", "55 to 59", "60 to 64", "65 to 69", "70 to 74", "75 to 79", "80 to 84", "85 to 89", "90 to 94", "95 or more"))
data2 <- data2 %>% filter(DISEASE == "Diseases of the circulatory system") %>% filter(GENDER != "Both") %>% filter(AGE != "All ages")
#data2 <- data2 %>% mutate(NUMBER.OF.DEATHS = ifelse(GENDER == "Males", -1 * NUMBER.OF.DEATHS, NUMBER.OF.DEATHS))
ggplot(data2, aes(x = AGE, y = NUMBER.OF.DEATHS, fill = GENDER)) +
geom_bar(subset = .(GENDER == "Females"), stat = "identity") +
geom_bar(subset = .(GENDER == "Males"), stat = "identity") +
scale_y_continuous(breaks = seq(-25000, 20000, 5000),
labels = paste0(as.character(c(seq(25, 0, -5), seq(5, 20, 5))), "m")) +
coord_flip() +
scale_fill_brewer(palette = "Set1") +
theme_bw()
mcol<-color.gradient(c(0,0,0.5,1),c(0,0,0.5,1),c(1,1,0.5,1),21)
fcol<-color.gradient(c(1,1,0.5,1),c(0.5,0.5,0.5,1),c(0.5,0.5,0.5,1),21)
par(mar=pyramid.plot((filter(data2, GENDER == "Males"))$NUMBER.OF.DEATHS,
(filter(data2, GENDER == "Females"))$NUMBER.OF.DEATHS,
labels=data2$AGE,
main="Australian population pyramid 2002",lxcol=mcol,rxcol=fcol,
gap=0.5,show.values=TRUE))
data2$AGE
filter(data2, GENDER == "Males"))$NUMBER.OF.DEATHS
filter(data2, GENDER == "Males")$NUMBER.OF.DEATHS
T(filter(data2, GENDER == "Males")$NUMBER.OF.DEATHS)
transform(filter(data2, GENDER == "Males")$NUMBER.OF.DEATHS)
par(mar=pyramid.plot(transform(filter(data2, GENDER == "Males")$NUMBER.OF.DEATHS),
transform(filter(data2, GENDER == "Females")$NUMBER.OF.DEATHS),
labels=data2$AGE,
main="Australian population pyramid 2002",lxcol=mcol,rxcol=fcol,
gap=0.5,show.values=TRUE))
mcol<-color.gradient(c(0,0,0.5,1),c(0,0,0.5,1),c(1,1,0.5,1),21)
fcol<-color.gradient(c(1,1,0.5,1),c(0.5,0.5,0.5,1),c(0.5,0.5,0.5,1),21)
par(mar=pyramid.plot(transform(filter(data2, GENDER == "Males")$NUMBER.OF.DEATHS),
transform(filter(data2, GENDER == "Females")$NUMBER.OF.DEATHS),
labels=data2$AGE,
main="Australian population pyramid 2002",lxcol=mcol,rxcol=fcol,
gap=0.5,show.values=TRUE))
transform(filter(data2, GENDER == "Males")$NUMBER.OF.DEATHS)
par(mar=pyramid.plot((filter(data2, GENDER == "Males")$NUMBER.OF.DEATHS),
(filter(data2, GENDER == "Females")$NUMBER.OF.DEATHS),
labels=data2$AGE,
main="Australian population pyramid 2002",lxcol=mcol,rxcol=fcol,
gap=0.5,show.values=TRUE))
c(3.2,3.5,3.6,3.6,3.5,3.5,3.9,3.7,3.9,3.5,3.2,2.8,2.2,1.8,
1.5,1.3,0.7,0.4)
(filter(data2, GENDER == "Males")$NUMBER.OF.DEATHS)
mcol
data2$AGE
data2$AGE.levels
levels(data2$AGE)
par(mar=pyramid.plot((filter(data2, GENDER == "Males")$NUMBER.OF.DEATHS),
(filter(data2, GENDER == "Females")$NUMBER.OF.DEATHS),
labels=levels(data2$AGE),
main="Australian population pyramid 2002",lxcol=mcol,rxcol=fcol,
gap=0.5,show.values=TRUE))
par(mar=pyramid.plot((filter(data2, GENDER == "Males")$NUMBER.OF.DEATHS),
(filter(data2, GENDER == "Females")$NUMBER.OF.DEATHS),
labels=levels(data2$AGE),
main="Australian population pyramid 2002",lxcol=mcol,rxcol=fcol,
gap=2,show.values=TRUE))
par(mar=pyramid.plot((filter(data2, GENDER == "Males")$NUMBER.OF.DEATHS),
(filter(data2, GENDER == "Females")$NUMBER.OF.DEATHS),
labels=levels(data2$AGE),
main="Australian population pyramid 2002",lxcol=mcol,rxcol=fcol,
gap=10,show.values=TRUE))
data2 <- spain_deaths
data2$AGE <- factor(data2$AGE, c("0 to 1", "1 to 4", "5 to 9", "10 to 14", "15 to 19", "20 to 24", "25 to 29", "30 to 34", "35 to 39", "40 to 44", "45 to 49", "50 to 54", "55 to 59", "60 to 64", "65 to 69", "70 to 74", "75 to 79", "80 to 84", "85 to 89", "90 to 94", "95 or more", "All ages"))
data2 <- data2 %>% filter(DISEASE == "Diseases of the circulatory system") %>% filter(GENDER != "Both") %>% filter(AGE != "All ages")
data2 <- data2 %>% mutate(NUMBER.OF.DEATHS = ifelse(GENDER == "Males", -1 * NUMBER.OF.DEATHS, NUMBER.OF.DEATHS))
ggplot(data2, aes(x = AGE, y = NUMBER.OF.DEATHS, fill = GENDER)) +
geom_bar(subset = .(GENDER == "Females"), stat = "identity") +
geom_bar(subset = .(GENDER == "Males"), stat = "identity") +
scale_y_continuous(breaks = seq(-20000, 20000, 5000),
labels = paste0(as.character(c(seq(20, 0, -5), seq(3, 18, 3))), "m")) +
coord_flip() +
scale_fill_brewer(palette = "Set1") +
theme_bw()
ggplot(data2, aes(x = AGE, y = NUMBER.OF.DEATHS, fill = GENDER)) +
geom_bar(subset = .(GENDER == "Females"), stat = "identity") +
geom_bar(subset = .(GENDER == "Males"), stat = "identity") +
scale_y_continuous(breaks = seq(-20000, 20000, 5000),
labels = paste0(as.character(c(seq(20, 0, -5), seq(5, 20, 5))), "m")) +
coord_flip() +
scale_fill_brewer(palette = "Set1") +
theme_bw()
ggplot(data2, aes(x = AGE, y = NUMBER.OF.DEATHS, fill = GENDER)) +
geom_bar(subset = .(GENDER == "Females"), stat = "identity") +
geom_bar(subset = .(GENDER == "Males"), stat = "identity") +
scale_y_continuous(breaks = seq(-20000, 20000, 5000),
labels = paste0(as.character(c(seq(20, 0, -5), seq(5, 20, 5))), "m")) +
coord_flip(ylim=c(-20000,20000)) +
scale_fill_brewer(palette = "Set1") +
theme_bw()
ggplot(data2, aes(x = AGE, y = NUMBER.OF.DEATHS, fill = GENDER)) +
geom_bar(subset = .(GENDER == "Females"), stat = "identity") +
geom_bar(subset = .(GENDER == "Males"), stat = "identity") +
scale_y_continuous(breaks = seq(-15000, 15000, 5000),
labels = paste0(as.character(c(seq(15, 0, -3), seq(5, 15, 3))), "m")) +
coord_flip(ylim=c(-20000,20000)) +
scale_fill_brewer(palette = "Set1") +
theme_bw()
seq(-15000, 15000, 5000)
c(seq(15, 0, -3), seq(5, 15, 3)
)
ggplot(data2, aes(x = AGE, y = NUMBER.OF.DEATHS, fill = GENDER)) +
geom_bar(subset = .(GENDER == "Females"), stat = "identity") +
geom_bar(subset = .(GENDER == "Males"), stat = "identity") +
scale_y_continuous(breaks = seq(-15000, 15000, 5000),
labels = paste0(as.character(c(seq(15, 0, -5), seq(5, 15, 5))), "m")) +
coord_flip(ylim=c(-20000,20000)) +
scale_fill_brewer(palette = "Set1") +
theme_bw()
ggplot(data2, aes(x = AGE, y = NUMBER.OF.DEATHS, fill = GENDER)) +
geom_bar(subset = .(GENDER == "Females"), stat = "identity") +
geom_bar(subset = .(GENDER == "Males"), stat = "identity") +
scale_y_continuous(breaks = seq(-15000, 15000, 5000),
labels = paste0(as.character(c(seq(15, 0, -5), seq(5, 15, 5))), "m")) +
coord_flip(ylim=c(-15000,15000)) +
scale_fill_brewer(palette = "Set1") +
theme_bw()
ggplot(data2, aes(x = AGE, y = NUMBER.OF.DEATHS, fill = GENDER)) +
geom_bar(subset = .(GENDER == "Females"), stat = "identity") +
geom_bar(subset = .(GENDER == "Males"), stat = "identity") +
scale_y_continuous(breaks = seq(-10000, 10000, 5000),
labels = paste0(as.character(c(seq(10, 0, -5), seq(5, 10, 5))), "m")) +
coord_flip(ylim=c(-15000,15000)) +
scale_fill_brewer(palette = "Set1") +
theme_bw()
ggplot(data2, aes(x = AGE, y = NUMBER.OF.DEATHS, fill = GENDER)) +
geom_bar(subset = .(GENDER == "Females"), stat = "identity") +
geom_bar(subset = .(GENDER == "Males"), stat = "identity") +
scale_y_continuous(breaks = seq(-10000, 10000, 5000),
labels = paste0(as.character(c(seq(10, 0, -5), seq(5, 10, 5))), "m")) +
coord_flip(ylim=c(-10000,10000)) +
scale_fill_brewer(palette = "Set1") +
theme_bw()
ggplot(data2, aes(x = AGE, y = NUMBER.OF.DEATHS, fill = GENDER)) +
geom_bar(subset = .(GENDER == "Females"), stat = "identity") +
geom_bar(subset = .(GENDER == "Males"), stat = "identity") +
scale_y_continuous(breaks = seq(-10000, 10000, 5000),
labels = paste0(as.character(c(seq(10, 0, -5), seq(5, 10, 5))), "m")) +
coord_flip(ylim=c(-11000,11000)) +
scale_fill_brewer(palette = "Set1") +
theme_bw()
ggplot(data2, aes(x = AGE, y = NUMBER.OF.DEATHS, fill = GENDER)) +
geom_bar(subset = .(GENDER == "Females"), stat = "identity") +
geom_bar(subset = .(GENDER == "Males"), stat = "identity") +
scale_y_continuous(breaks = seq(-10000, 10000, 5000),
labels = paste0(as.character(c(seq(10, 0, -5), seq(5, 10, 5))), "m")) +
coord_flip(ylim=c(-15000,15000)) +
scale_fill_brewer(palette = "Set1") +
theme_bw()
ggplot(data2, aes(x = AGE, y = NUMBER.OF.DEATHS, fill = GENDER)) +
geom_bar(subset = .(GENDER == "Females"), stat = "identity") +
geom_bar(subset = .(GENDER == "Males"), stat = "identity") +
scale_y_continuous(breaks = seq(-15000, 15000, 5000),
labels = paste0(as.character(c(seq(15, 0, -5), seq(5, 15, 5))), "m")) +
coord_flip(ylim=c(-15000,15000)) +
scale_fill_brewer(palette = "Set1") +
theme_bw()
